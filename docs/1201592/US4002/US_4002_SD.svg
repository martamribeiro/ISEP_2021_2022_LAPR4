<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1178px" preserveAspectRatio="none" style="width:1468px;height:1178px;background:#FFFFFF;" version="1.1" viewBox="0 0 1468 1178" width="1468px" zoomAndPan="magnify"><defs><filter height="300%" id="f1ksba4fykgqm7" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1ksba4fykgqm7)" height="984.7344" style="stroke:#A80036;stroke-width:1.0;" width="10" x="82.5" y="99.6094"/><rect fill="#FFFFFF" filter="url(#f1ksba4fykgqm7)" height="90.7031" style="stroke:#A80036;stroke-width:1.0;" width="10" x="640.5" y="165.3125"/><rect fill="#FFFFFF" filter="url(#f1ksba4fykgqm7)" height="90.7031" style="stroke:#A80036;stroke-width:1.0;" width="10" x="640.5" y="372.0703"/><rect fill="#FFFFFF" filter="url(#f1ksba4fykgqm7)" height="90.7031" style="stroke:#A80036;stroke-width:1.0;" width="10" x="640.5" y="776.2344"/><rect fill="#FFFFFF" filter="url(#f1ksba4fykgqm7)" height="60.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="791.5" y="195.6641"/><rect fill="#FFFFFF" filter="url(#f1ksba4fykgqm7)" height="60.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="791.5" y="402.4219"/><rect fill="#FFFFFF" filter="url(#f1ksba4fykgqm7)" height="60.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="791.5" y="806.5859"/><rect fill="#FFFFFF" filter="url(#f1ksba4fykgqm7)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="934" y="226.0156"/><rect fill="#FFFFFF" filter="url(#f1ksba4fykgqm7)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="934" y="311.3672"/><rect fill="#FFFFFF" filter="url(#f1ksba4fykgqm7)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1067" y="432.7734"/><rect fill="#FFFFFF" filter="url(#f1ksba4fykgqm7)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1067" y="518.125"/><rect fill="#FFFFFF" filter="url(#f1ksba4fykgqm7)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1197" y="836.9375"/><rect fill="#FFFFFF" filter="url(#f1ksba4fykgqm7)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1197" y="922.2891"/><rect fill="#FFFFFF" filter="url(#f1ksba4fykgqm7)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1309.5" y="1007.6406"/><rect fill="#FFFFFF" filter="url(#f1ksba4fykgqm7)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1400.5" y="690.8828"/><rect fill="#FFFFFF" filter="url(#f1ksba4fykgqm7)" height="482.5156" style="stroke:#000000;stroke-width:2.0;" width="1444.5" x="10" y="563.4766"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="87" x2="87" y1="89.6094" y2="1093.3438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="503.5" x2="503.5" y1="89.6094" y2="1093.3438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="645.5" x2="645.5" y1="89.6094" y2="1093.3438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="796.5" x2="796.5" y1="89.6094" y2="1093.3438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="938.5" x2="938.5" y1="89.6094" y2="1093.3438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1071.5" x2="1071.5" y1="89.6094" y2="1093.3438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1201.5" x2="1201.5" y1="89.6094" y2="1093.3438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1314.5" x2="1314.5" y1="89.6094" y2="1093.3438"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1405.5" x2="1405.5" y1="89.6094" y2="1093.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129" x="20" y="86.5332">:TcpSrvAgvManager</text><ellipse cx="87.5" cy="15" fill="#FEFECE" filter="url(#f1ksba4fykgqm7)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M87.5,23 L87.5,50 M74.5,31 L100.5,31 M87.5,50 L74.5,65 M87.5,50 L100.5,65 " fill="none" filter="url(#f1ksba4fykgqm7)" style="stroke:#A80036;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129" x="20" y="1106.877">:TcpSrvAgvManager</text><ellipse cx="87.5" cy="1119.9531" fill="#FEFECE" filter="url(#f1ksba4fykgqm7)" rx="8" ry="8" style="stroke:#A80036;stroke-width:2.0;"/><path d="M87.5,1127.9531 L87.5,1154.9531 M74.5,1135.9531 L100.5,1135.9531 M87.5,1154.9531 L74.5,1169.9531 M87.5,1154.9531 L100.5,1169.9531 " fill="none" filter="url(#f1ksba4fykgqm7)" style="stroke:#A80036;stroke-width:2.0;"/><rect fill="#FEFECE" filter="url(#f1ksba4fykgqm7)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="116" x="443.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="450.5" y="74.5332">:TcpCliAGVTwin</text><rect fill="#FEFECE" filter="url(#f1ksba4fykgqm7)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="116" x="443.5" y="1092.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="450.5" y="1113.877">:TcpCliAGVTwin</text><rect fill="#FEFECE" filter="url(#f1ksba4fykgqm7)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="140" x="573.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126" x="580.5" y="74.5332">:PersistenceContext</text><rect fill="#FEFECE" filter="url(#f1ksba4fykgqm7)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="140" x="573.5" y="1092.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126" x="580.5" y="1113.877">:PersistenceContext</text><rect fill="#FEFECE" filter="url(#f1ksba4fykgqm7)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="134" x="727.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="734.5" y="74.5332">:RepositoryFactory</text><rect fill="#FEFECE" filter="url(#f1ksba4fykgqm7)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="134" x="727.5" y="1092.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="734.5" y="1113.877">:RepositoryFactory</text><rect fill="#FEFECE" filter="url(#f1ksba4fykgqm7)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="123" x="875.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109" x="882.5" y="74.5332">:OrderRepository</text><rect fill="#FEFECE" filter="url(#f1ksba4fykgqm7)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="123" x="875.5" y="1092.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109" x="882.5" y="1113.877">:OrderRepository</text><rect fill="#FEFECE" filter="url(#f1ksba4fykgqm7)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="115" x="1012.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="1019.5" y="74.5332">:AGVRepository</text><rect fill="#FEFECE" filter="url(#f1ksba4fykgqm7)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="115" x="1012.5" y="1092.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="1019.5" y="1113.877">:AGVRepository</text><rect fill="#FEFECE" filter="url(#f1ksba4fykgqm7)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="117" x="1141.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="1148.5" y="74.5332">:TaskRepository</text><rect fill="#FEFECE" filter="url(#f1ksba4fykgqm7)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="117" x="1141.5" y="1092.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="103" x="1148.5" y="1113.877">:TaskRepository</text><rect fill="#FEFECE" filter="url(#f1ksba4fykgqm7)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="80" x="1272.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="1279.5" y="74.5332">:TheOrder</text><rect fill="#FEFECE" filter="url(#f1ksba4fykgqm7)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="80" x="1272.5" y="1092.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="66" x="1279.5" y="1113.877">:TheOrder</text><rect fill="#FEFECE" filter="url(#f1ksba4fykgqm7)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="74" x="1366.5" y="53"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="1373.5" y="74.5332">:TheTask</text><rect fill="#FEFECE" filter="url(#f1ksba4fykgqm7)" height="31.6094" style="stroke:#A80036;stroke-width:1.5;" width="74" x="1366.5" y="1092.3438"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="1373.5" y="1113.877">:TheTask</text><rect fill="#FFFFFF" filter="url(#f1ksba4fykgqm7)" height="984.7344" style="stroke:#A80036;stroke-width:1.0;" width="10" x="82.5" y="99.6094"/><rect fill="#FFFFFF" filter="url(#f1ksba4fykgqm7)" height="90.7031" style="stroke:#A80036;stroke-width:1.0;" width="10" x="640.5" y="165.3125"/><rect fill="#FFFFFF" filter="url(#f1ksba4fykgqm7)" height="90.7031" style="stroke:#A80036;stroke-width:1.0;" width="10" x="640.5" y="372.0703"/><rect fill="#FFFFFF" filter="url(#f1ksba4fykgqm7)" height="90.7031" style="stroke:#A80036;stroke-width:1.0;" width="10" x="640.5" y="776.2344"/><rect fill="#FFFFFF" filter="url(#f1ksba4fykgqm7)" height="60.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="791.5" y="195.6641"/><rect fill="#FFFFFF" filter="url(#f1ksba4fykgqm7)" height="60.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="791.5" y="402.4219"/><rect fill="#FFFFFF" filter="url(#f1ksba4fykgqm7)" height="60.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="791.5" y="806.5859"/><rect fill="#FFFFFF" filter="url(#f1ksba4fykgqm7)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="934" y="226.0156"/><rect fill="#FFFFFF" filter="url(#f1ksba4fykgqm7)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="934" y="311.3672"/><rect fill="#FFFFFF" filter="url(#f1ksba4fykgqm7)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1067" y="432.7734"/><rect fill="#FFFFFF" filter="url(#f1ksba4fykgqm7)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1067" y="518.125"/><rect fill="#FFFFFF" filter="url(#f1ksba4fykgqm7)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1197" y="836.9375"/><rect fill="#FFFFFF" filter="url(#f1ksba4fykgqm7)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1197" y="922.2891"/><rect fill="#FFFFFF" filter="url(#f1ksba4fykgqm7)" height="30.3516" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1309.5" y="1007.6406"/><rect fill="#FFFFFF" filter="url(#f1ksba4fykgqm7)" height="30" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1400.5" y="690.8828"/><line style="stroke:#A80036;stroke-width:1.0;" x1="92.5" x2="134.5" y1="121.9609" y2="121.9609"/><line style="stroke:#A80036;stroke-width:1.0;" x1="134.5" x2="134.5" y1="121.9609" y2="134.9609"/><line style="stroke:#A80036;stroke-width:1.0;" x1="93.5" x2="134.5" y1="134.9609" y2="134.9609"/><polygon fill="#A80036" points="103.5,130.9609,93.5,134.9609,103.5,138.9609,99.5,134.9609" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="99.5" y="117.1045">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="381" x="110.5" y="117.1045">automatically request to assign available orders to available AGVs</text><polygon fill="#A80036" points="628.5,161.3125,638.5,165.3125,628.5,169.3125,632.5,165.3125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="92.5" x2="634.5" y1="165.3125" y2="165.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="99.5" y="160.4561">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="110.5" y="160.4561">repositories()</text><polygon fill="#A80036" points="779.5,191.6641,789.5,195.6641,779.5,199.6641,783.5,195.6641" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="650.5" x2="785.5" y1="195.6641" y2="195.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="657.5" y="190.8076">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="668.5" y="190.8076">create</text><polygon fill="#A80036" points="922,222.0156,932,226.0156,922,230.0156,926,226.0156" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="801.5" x2="928" y1="226.0156" y2="226.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="808.5" y="221.1592">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="819.5" y="221.1592">create</text><polygon fill="#A80036" points="922,307.3672,932,311.3672,922,315.3672,926,311.3672" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="92.5" x2="928" y1="311.3672" y2="311.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="99.5" y="306.5107">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="235" x="110.5" y="306.5107">findByOrderStatus(TO_BE_PREPARED)</text><polygon fill="#A80036" points="103.5,337.7188,93.5,341.7188,103.5,345.7188,99.5,341.7188" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="97.5" x2="938" y1="341.7188" y2="341.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="109.5" y="336.8623">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="120.5" y="336.8623">ordersToAssign</text><polygon fill="#A80036" points="628.5,368.0703,638.5,372.0703,628.5,376.0703,632.5,372.0703" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="92.5" x2="634.5" y1="372.0703" y2="372.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="99.5" y="367.2139">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="110.5" y="367.2139">repositories()</text><polygon fill="#A80036" points="779.5,398.4219,789.5,402.4219,779.5,406.4219,783.5,402.4219" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="650.5" x2="785.5" y1="402.4219" y2="402.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="657.5" y="397.5654">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="668.5" y="397.5654">create</text><polygon fill="#A80036" points="1055,428.7734,1065,432.7734,1055,436.7734,1059,432.7734" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="801.5" x2="1061" y1="432.7734" y2="432.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="7" x="808.5" y="427.917">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="819.5" y="427.917">create</text><polygon fill="#A80036" points="1055,514.125,1065,518.125,1055,522.125,1059,518.125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="92.5" x2="1061" y1="518.125" y2="518.125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="99.5" y="513.2686">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="117.5" y="513.2686">findByTaskStatus(FREE)</text><polygon fill="#A80036" points="103.5,544.4766,93.5,548.4766,103.5,552.4766,99.5,548.4766" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="97.5" x2="1071" y1="548.4766" y2="548.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="109.5" y="543.6201">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="127.5" y="543.6201">availableAGVs</text><path d="M10,563.4766 L71,563.4766 L71,571.4766 L61,581.4766 L10,581.4766 L10,563.4766 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="482.5156" style="stroke:#000000;stroke-width:2.0;" width="1444.5" x="10" y="563.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="25" y="577.9717">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="290" x="86" y="576.8955">[for each pair or ordersToAssign and availableAGVs]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="92.5" x2="134.5" y1="604.1797" y2="604.1797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="134.5" x2="134.5" y1="604.1797" y2="617.1797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="93.5" x2="134.5" y1="617.1797" y2="617.1797"/><polygon fill="#A80036" points="103.5,613.1797,93.5,617.1797,103.5,621.1797,99.5,617.1797" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="99.5" y="599.3232">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81" x="117.5" y="599.3232">selectedOrder</text><line style="stroke:#A80036;stroke-width:1.0;" x1="92.5" x2="134.5" y1="647.5313" y2="647.5313"/><line style="stroke:#A80036;stroke-width:1.0;" x1="134.5" x2="134.5" y1="647.5313" y2="660.5313"/><line style="stroke:#A80036;stroke-width:1.0;" x1="93.5" x2="134.5" y1="660.5313" y2="660.5313"/><polygon fill="#A80036" points="103.5,656.5313,93.5,660.5313,103.5,664.5313,99.5,660.5313" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="99.5" y="642.6748">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77" x="117.5" y="642.6748">selectedAGV</text><polygon fill="#A80036" points="1388.5,686.8828,1398.5,690.8828,1388.5,694.8828,1392.5,690.8828" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="92.5" x2="1394.5" y1="690.8828" y2="690.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="99.5" y="686.0264">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="277" x="117.5" y="686.0264">newTask = create(selectedAGV, selectedOrder)</text><polygon fill="#A80036" points="628.5,772.2344,638.5,776.2344,628.5,780.2344,632.5,776.2344" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="92.5" x2="634.5" y1="776.2344" y2="776.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="99.5" y="771.3779">15</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="75" x="117.5" y="771.3779">repositories()</text><polygon fill="#A80036" points="779.5,802.5859,789.5,806.5859,779.5,810.5859,783.5,806.5859" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="650.5" x2="785.5" y1="806.5859" y2="806.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="657.5" y="801.7295">16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="675.5" y="801.7295">create</text><polygon fill="#A80036" points="1185,832.9375,1195,836.9375,1185,840.9375,1189,836.9375" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="801.5" x2="1191" y1="836.9375" y2="836.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="808.5" y="832.0811">17</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="36" x="826.5" y="832.0811">create</text><polygon fill="#A80036" points="1185,918.2891,1195,922.2891,1185,926.2891,1189,922.2891" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="92.5" x2="1191" y1="922.2891" y2="922.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="99.5" y="917.4326">18</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="85" x="117.5" y="917.4326">save(newTask)</text><polygon fill="#A80036" points="1297.5,1003.6406,1307.5,1007.6406,1297.5,1011.6406,1301.5,1007.6406" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="92.5" x2="1303.5" y1="1007.6406" y2="1007.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="99.5" y="1002.7842">19</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="302" x="117.5" y="1002.7842">setStatus(BEING_PREPARED_ON_WAREHOUSE)</text><polygon fill="#A80036" points="103.5,1033.9922,93.5,1037.9922,103.5,1041.9922,99.5,1037.9922" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="97.5" x2="1313.5" y1="1037.9922" y2="1037.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="109.5" y="1033.1357">20</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81" x="127.5" y="1033.1357">selectedOrder</text><polygon fill="#A80036" points="491.5,1071.3438,501.5,1075.3438,491.5,1079.3438,495.5,1075.3438" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="92.5" x2="497.5" y1="1075.3438" y2="1075.3438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="14" x="99.5" y="1070.4873">21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="117.5" y="1070.4873">updateAgvsStatus()</text><!--MD5=[70aa9970bb2b6e9ae1c3b2fb6d935e6f]
@startuml
'https://plantuml.com/sequence-diagram

autonumber

Actor ":TcpSrvAgvManager" as AGVM
participant ":TcpCliAGVTwin" as AGVTC
participant ":PersistenceContext" as Persistance
participant ":RepositoryFactory" as Factory
participant ":OrderRepository" as OrderRep
participant ":AGVRepository" as AGVRep
participant ":TaskRepository" as TaskRep
participant ":TheOrder" as ORDER
participant ":TheTask" as Task

activate AGVM
AGVM -> AGVM : automatically request to assign available orders to available AGVs
AGVM -> Persistance : repositories()
activate Persistance
Persistance -> Factory : create
activate Factory
Factory -> OrderRep : create
activate OrderRep
|||
deactivate OrderRep
deactivate Factory
deactivate Persistance
AGVM -> OrderRep : findByOrderStatus(TO_BE_PREPARED)
activate OrderRep
OrderRep - -> AGVM : ordersToAssign
deactivate OrderRep
AGVM -> Persistance : repositories()
activate Persistance
Persistance -> Factory : create
activate Factory
Factory -> AGVRep : create
activate AGVRep
|||
deactivate AGVRep
deactivate Factory
deactivate Persistance
AGVM -> AGVRep : findByTaskStatus(FREE)
activate AGVRep
AGVRep - -> AGVM : availableAGVs
deactivate AGVRep

alt for each pair or ordersToAssign and availableAGVs
AGVM -> AGVM : selectedOrder
AGVM -> AGVM : selectedAGV

AGVM -> Task : newTask = create(selectedAGV, selectedOrder)
activate Task
|||
deactivate Task
AGVM -> Persistance : repositories()
activate Persistance
Persistance -> Factory : create
activate Factory
Factory -> TaskRep : create
activate TaskRep
|||
deactivate TaskRep
deactivate Factory
deactivate Persistance
AGVM -> TaskRep : save(newTask)
activate TaskRep
|||
deactivate TaskRep

AGVM -> ORDER : setStatus(BEING_PREPARED_ON_WAREHOUSE)
activate ORDER
ORDER - -> AGVM : selectedOrder
deactivate ORDER

end

AGVM -> AGVTC : updateAgvsStatus()

@enduml

@startuml

autonumber

Actor ":TcpSrvAgvManager" as AGVM
participant ":TcpCliAGVTwin" as AGVTC
participant ":PersistenceContext" as Persistance
participant ":RepositoryFactory" as Factory
participant ":OrderRepository" as OrderRep
participant ":AGVRepository" as AGVRep
participant ":TaskRepository" as TaskRep
participant ":TheOrder" as ORDER
participant ":TheTask" as Task

activate AGVM
AGVM -> AGVM : automatically request to assign available orders to available AGVs
AGVM -> Persistance : repositories()
activate Persistance
Persistance -> Factory : create
activate Factory
Factory -> OrderRep : create
activate OrderRep
|||
deactivate OrderRep
deactivate Factory
deactivate Persistance
AGVM -> OrderRep : findByOrderStatus(TO_BE_PREPARED)
activate OrderRep
OrderRep - -> AGVM : ordersToAssign
deactivate OrderRep
AGVM -> Persistance : repositories()
activate Persistance
Persistance -> Factory : create
activate Factory
Factory -> AGVRep : create
activate AGVRep
|||
deactivate AGVRep
deactivate Factory
deactivate Persistance
AGVM -> AGVRep : findByTaskStatus(FREE)
activate AGVRep
AGVRep - -> AGVM : availableAGVs
deactivate AGVRep

alt for each pair or ordersToAssign and availableAGVs
AGVM -> AGVM : selectedOrder
AGVM -> AGVM : selectedAGV

AGVM -> Task : newTask = create(selectedAGV, selectedOrder)
activate Task
|||
deactivate Task
AGVM -> Persistance : repositories()
activate Persistance
Persistance -> Factory : create
activate Factory
Factory -> TaskRep : create
activate TaskRep
|||
deactivate TaskRep
deactivate Factory
deactivate Persistance
AGVM -> TaskRep : save(newTask)
activate TaskRep
|||
deactivate TaskRep

AGVM -> ORDER : setStatus(BEING_PREPARED_ON_WAREHOUSE)
activate ORDER
ORDER - -> AGVM : selectedOrder
deactivate ORDER

end

AGVM -> AGVTC : updateAgvsStatus()

@enduml

PlantUML version 1.2021.11(Sat Oct 02 14:26:11 BST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: pt
Country: PT
--></g></svg>